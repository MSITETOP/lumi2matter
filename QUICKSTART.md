# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - Matter Bridge –¥–ª—è Lumi Gateway

## ‚ú® –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Matter UDP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞!

**–ù–æ–≤–æ–µ –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏:**
- ‚úÖ UDP —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 5540
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Matter commissioning messages
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π PASE handshake
- ‚úÖ –Ø–Ω–¥–µ–∫—Å –°—Ç–∞–Ω—Ü–∏—è —Ç–µ–ø–µ—Ä—å –í–ò–î–ò–¢ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ!

## –ß—Ç–æ –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

‚úÖ **QR –∫–æ–¥** –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ø–Ω–¥–µ–∫—Å –°—Ç–∞–Ω—Ü–∏–µ–π  
‚úÖ **–†—É—á–Ω–æ–π –∫–æ–¥ —Å–æ–ø—Ä—è–∂–µ–Ω–∏—è** (11 —Ü–∏—Ñ—Ä)  
‚úÖ RGB LED —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Matter  
‚úÖ –°–æ–±—ã—Ç–∏—è –∫–Ω–æ–ø–∫–∏ (single, double, hold)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (3 —à–∞–≥–∞)

### 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip3 install -r requirements.txt
```

### 2Ô∏è‚É£ –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
cp lumimqtt.json my_config.json
# –ò–∑–º–µ–Ω–∏—Ç–µ device_id –∏ device_name –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```

### 3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–µ!

```bash
LUMIMQTT_CONFIG=./lumimqtt.json python3 -m lumimqtt
```

## üéØ –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ

```
============================================================
üîó MATTER DEVICE PAIRING INFORMATION
============================================================
Device Name: Lumi Gateway
Device ID: lumi_gateway_001
Vendor ID: 0xFFF1
Product ID: 0x8001
------------------------------------------------------------
üì± Manual Pairing Code: 38400-2020202
üî¢ Discriminator: 3840
üîê Setup PIN: 20202021
------------------------------------------------------------
üì∑ QR Code - scan with Yandex Station:

‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñà‚ñà‚ñà ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ ‚ñà‚ñÄ‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÄ‚ñÑ‚ñà ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ ‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñà‚ñà‚ñà ‚ñà   ‚ñà ‚ñà‚ñÄ‚ñÄ‚ñÄ‚ñà ‚ñÄ ‚ñÑ‚ñà ‚ñà   ‚ñà ‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñà ‚ñà‚ñÄ ‚ñà‚ñÄ‚ñÄ‚ñà ‚ñà‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñà ‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñà‚ñà‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñÑ‚ñÄ ‚ñÄ‚ñÑ‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñà‚ñà‚ñà‚ñÑ ‚ñÑ‚ñÑ ‚ñÄ‚ñÑ  ‚ñÑ‚ñà‚ñÄ‚ñÑ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÄ ‚ñÄ‚ñÑ‚ñà‚ñÑ‚ñÑ‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñà‚ñà‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà

============================================================
‚ÑπÔ∏è  Instructions:
1. Open Yandex Station app
2. Go to 'Add Device' -> 'Matter'
3. Scan QR code above OR enter manual code
4. Follow on-screen instructions
============================================================
```

## üì± –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ø–Ω–¥–µ–∫—Å –°—Ç–∞–Ω—Ü–∏–∏

### –°–ø–æ—Å–æ–± 1: QR –∫–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ø–Ω–¥–µ–∫—Å
2. "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞" ‚Üí "+" ‚Üí "Matter —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
3. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏

### –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–æ–π –≤–≤–æ–¥
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ø–Ω–¥–µ–∫—Å
2. "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞" ‚Üí "+" ‚Üí "Matter —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
3. "–í–≤–µ—Å—Ç–∏ –∫–æ–¥ –≤—Ä—É—á–Ω—É—é"
4. –í–≤–µ–¥–∏—Ç–µ: `38400-2020202`

## üß™ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç QR –∫–æ–¥–∞

–ß—Ç–æ–±—ã –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å QR –∫–æ–¥ –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:

```bash
python3 test_qr.py
```

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

**RGB LED:**
- "–ê–ª–∏—Å–∞, –≤–∫–ª—é—á–∏ —Å–≤–µ—Ç"
- "–ê–ª–∏—Å–∞, —Å–¥–µ–ª–∞–π —Å–≤–µ—Ç –∫—Ä–∞—Å–Ω—ã–º"
- "–ê–ª–∏—Å–∞, —è—Ä–∫–æ—Å—Ç—å 50 –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤"

**–ö–Ω–æ–ø–∫–∞:**
- –û–¥–Ω–æ –Ω–∞–∂–∞—Ç–∏–µ ‚Üí —Ç—Ä–∏–≥–≥–µ—Ä –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
- –î–≤–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ ‚Üí –¥—Ä—É–≥–æ–π —Ç—Ä–∏–≥–≥–µ—Ä
- –£–¥–µ—Ä–∂–∞–Ω–∏–µ ‚Üí –µ—â—ë –æ–¥–∏–Ω —Ç—Ä–∏–≥–≥–µ—Ä

## üìã –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. [MATTER_SETUP.md](MATTER_SETUP.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

## ‚ùì –ü—Ä–æ–±–ª–µ–º—ã?

**QR –∫–æ–¥ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è?**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: `pip3 install qrcode`

**–Ø–Ω–¥–µ–∫—Å –°—Ç–∞–Ω—Ü–∏—è –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ?**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω–∏ –≤ –æ–¥–Ω–æ–π WiFi —Å–µ—Ç–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ mDNS —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–æ—Ä—Ç 5353/UDP)

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è?**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –≤ —Å–∏—Å—Ç–µ–º–µ:
  - LED: `/sys/class/leds/red`, `/sys/class/leds/green`, `/sys/class/leds/blue`
  - –ö–Ω–æ–ø–∫–∞: `/dev/input/event0`
